<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <title>MURYLLLO APP â€“ Debug</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-black text-white font-sans p-4">

  <!-- TÃTULO -->
  <h1 class="text-xl font-bold text-green-400 mb-4">ğŸ¯ MURYLLLO APP â€“ AnÃ¡lises</h1>

  <!-- SELECT DE ANÃLISES -->
  <div class="mb-4">
    <label class="block mb-1 text-sm text-gray-300">Selecionar anÃ¡lise</label>
    <select id="analiseSelect"
      class="bg-gray-800 text-white px-3 py-2 rounded w-full"
      onchange="aplicarCores(this.value)">
    </select>
  </div>

  <!-- GRADE DE NÃšMEROS -->
  <div id="grade"
    class="grid grid-cols-6 gap-2 mb-6">
  </div>

  <!-- PAINEL DEBUG -->
  <div id="debugPanel" class="bg-gray-900 border border-gray-700 rounded p-3 text-sm">
    <h2 class="text-green-400 font-bold mb-2">ğŸ§ª DEBUG CONSOLE</h2>

    <div class="flex gap-2 mb-2 flex-wrap">
      <button onclick="debugStatus()" class="bg-blue-600 px-2 py-1 rounded">Status</button>
      <button onclick="debugListarAnalises()" class="bg-purple-600 px-2 py-1 rounded">Listar AnÃ¡lises</button>
    </div>

    <div id="debugTerminal" class="flex gap-1 mb-2 flex-wrap"></div>

    <pre id="debugLog"
      class="bg-black text-green-400 p-2 rounded max-h-48 overflow-auto text-xs font-mono"></pre>
  </div>

  <!-- SCRIPT -->
  <script>
    let alvo = [];
    let analise = {};
    let jogada = {};
   let terminalquente = {};

    /* ---------------- GRADE ---------------- */

    function atualizarGrade() {
      const grade = document.getElementById("grade");
      grade.innerHTML = "";

      for (let i = 0; i <= 36; i++) {
        const div = document.createElement("div");
        div.id = "num-" + i;
        div.textContent = i;
        div.className =
          "bg-gray-800 rounded text-center py-3 border border-gray-700";
        grade.appendChild(div);
      }
    }

    function limparGrade() {
      for (let i = 0; i <= 36; i++) {
        const el = document.getElementById("num-" + i);
        if (el) el.style.background = "";
      }
    }

    function destacarNumeros(lista) {
      limparGrade();
      lista.forEach(n => {
        const el = document.getElementById("num-" + n);
        if (el) el.style.background = "#16a34a";
      });
    }

    /* ---------------- ANÃLISES ---------------- */

    function aplicarCores(nome) {
      if (!analise[nome]) return;
      if (Array.isArray(analise[nome])) {
        destacarNumeros(analise[nome]);
      }
    }

    function preencherAnalise() {
      const select = document.getElementById("analiseSelect");
      select.innerHTML = "";

      Object.keys(analise).forEach((key, i) => {
        const opt = document.createElement("option");
        opt.value = key;
        opt.textContent = key.toUpperCase();
        if (i === 0) opt.selected = true;
        select.appendChild(opt);
      });

      aplicarCores(select.value);
    }

    /* ---------------- DEBUG ---------------- */

    function logDebug(msg) {
      const log = document.getElementById("debugLog");
      log.textContent += msg + "\n";
      log.scrollTop = log.scrollHeight;
    }

    function debugStatus() {
      logDebug("ğŸ“Š STATUS");
      logDebug("jogada: " + jogada.length);
      logDebug("analise: " + Object.keys(analise).length);
      logDebug("alvo: " + Object.keys(alvo).length);
      logDebug("------------------");
    }

    function debugListarAnalises() {
      logDebug("ğŸ“‹ ANÃLISES:");
      Object.keys(analise).forEach(a => logDebug("â€¢ " + a));
      logDebug("------------------");
    }

    function montarDebugTerminal() {
      const div = document.getElementById("debugTerminal");
      div.innerHTML = "";

      if (!analise["Terminal quente"]) return;

      logDebug("ğŸ”¥ Terminal Quente detectado");

      for (let i = 0; i <= 9; i++) {
        const btn = document.createElement("button");
        btn.textContent = i;
        btn.className = "bg-red-600 px-2 py-1 rounded text-xs";
        btn.onclick = () => {
          logDebug("ğŸ¯ Terminal quente " + i);
          destacarNumeros(analises["Terminal quente"][i] || []);
        };
        div.appendChild(btn);
      }
    }

    /* ---------------- FETCH ---------------- */

    fetch("https://murylllobenigno-lab.github.io/V-rus.on/dados.json")
      .then(r => r.json())
      .then(dados => {
        jogada = dados.jogada || [];
        analise = dados.analise || {};
        alvo = dados.alvo || {};
         terminalquente = dados.terminalquente|| {};

        atualizarGrade();
        preencherAnalise();
        montarDebugTerminal();

        logDebug("âœ… JSON carregado com sucesso");
      })
      .catch(err => {
        logDebug("âŒ Erro ao carregar JSON");
        console.error(err);
      });
  </script>

</body>
</html>