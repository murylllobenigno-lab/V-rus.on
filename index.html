<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>M.BOOT</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>

<body class="bg-black text-white font-sans">
  <div id="app"></div>

<script>
/* =========================
   BASE
========================= */
const app = document.getElementById('app');

function createElement(tag, className = '', content = '') {
  const el = document.createElement(tag);
  if (className) el.className = className;
  if (content) el.innerHTML = content;
  return el;
}

/* =========================
   HEADER
========================= */
const header = createElement('header', 'bg-black text-center py-4');
const title = createElement('h1', 'text-3xl font-bold text-yellow-400', 'M.BOOT');
header.appendChild(title);

/* =========================
   VARIÁVEIS GLOBAIS
========================= */
let numerosData = [];
let jogadasAlvo = {};
let analises = {};
let usuarios = [];
let recolhido = false;

/* =========================
   FUNÇÕES AUXILIARES
========================= */
function pegarUltimos5Operacoes() {
  return numerosData.slice(0, 5);
}

function criarGrade(numeros) {
  return numeros.map(n => `
    <div class="numero w-7 h-7 text-xs flex items-center justify-center rounded
      text-white font-semibold border" data-number="${n}">
      ${n}
    </div>
  `).join('');
}

function aplicarCores(tipo) {
  const ativos = analises[tipo] || [];
  document.querySelectorAll('.numero').forEach(el => {
    const n = parseInt(el.dataset.number);
    el.className = `numero w-7 h-7 text-xs flex items-center justify-center rounded
      text-white font-semibold border transition-all duration-300
      ${ativos.includes(n) ? 'bg-red-800' : 'bg-blue-900'}`;
  });
}

function atualizarGrade() {
  const grid = document.getElementById('grid');
  if (!grid) return;
  const dados = recolhido ? numerosData.slice(-10) : numerosData;
  grid.innerHTML = criarGrade(dados);
  const select = document.getElementById('analiseSelect');
  if (select) aplicarCores(select.value);
}

/* =========================
   ABAS
========================= */
const abaInicio = createElement('section', 'p-4', `
  <div class="grid gap-4">
    <a href="https://blaze.bet.br/pt/games/roleta-brasileira" target="_blank">
      <img src="https://assets.sitecontents.net/slots/133/desktopImage-Roleta-Brasileira-1-min-1696619712031.jpg">
    </a>
    <a href="https://blaze.bet.br/pt/games/mega-fire-blaze-roleta-brasileira-live" target="_blank">
      <img src="https://d205654a3b2af1b75209-275b861a8577e42fdaf34f4c14f5e708.ssl.cf3.rackcdn.com/rYvNQwPAz/OAdaOIKgmOeKLr.jpg">
    </a>
  </div>
`);

const abaOperacoes = createElement('section', 'p-4 hidden');
abaOperacoes.innerHTML = `
  <div class="flex justify-between mb-4">
    <select id="analiseSelect" class="bg-gray-800 px-3 py-2 rounded w-1/2">
      <option value="espelhos">ESPELHOS</option>
      <option value="gemeos">GEMEOS</option>
    </select>
    <button id="recolherBtn" class="bg-yellow-600 text-black px-4 py-2 rounded">
      ↑ Recolher ↑
    </button>
  </div>
  <div class="p-2 border border-gray-700 rounded">
    <div id="grid" class="grid grid-cols-9 gap-1"></div>
  </div>
`;

const abaMuryllo = createElement('section', 'p-4 hidden', `
  <h2 class="text-xl font-bold text-yellow-400 mb-4">M.BOOT</h2>
  <input id="ultimosAlvo" class="w-full p-2 mb-3 bg-black border rounded"
    placeholder="Ex: 10,20,30">
  <button onclick="processarAlvo()"
    class="w-full bg-yellow-400 text-black py-2 rounded font-bold">
    Analisar
  </button>
  <div id="resultadoAlvo" class="mt-4 text-center"></div>
`);

/* =========================
   NAV
========================= */
const nav = createElement('nav', 'fixed bottom-0 left-0 right-0 bg-gray-900 flex justify-around py-3');

const btnInicio = createElement('button', 'flex flex-col items-center text-sm',
  `<span class="material-icons">home</span>Inicio`);

const btnOperacoes = createElement('button', 'flex flex-col items-center text-sm',
  `<span class="material-icons">casino</span>Operações`);

const btnMuryllo = createElement('button', 'flex flex-col items-center text-sm',
  `<span class="material-icons">star</span>Muryllo`);

/* =========================
   TROCA DE ABAS
========================= */
function atualizarAbas(ativa) {
  abaInicio.classList.add('hidden');
  abaOperacoes.classList.add('hidden');
  abaMuryllo.classList.add('hidden');

  if (ativa === 'inicio') abaInicio.classList.remove('hidden');
  if (ativa === 'operacoes') {
    abaOperacoes.classList.remove('hidden');
    atualizarGrade();
  }
  if (ativa === 'muryllo') {
    abaMuryllo.classList.remove('hidden');
    processarAlvo();
  }
}

btnInicio.onclick = () => atualizarAbas('inicio');
btnOperacoes.onclick = () => atualizarAbas('operacoes');
btnMuryllo.onclick = () => {
  if (verificarLogin()) atualizarAbas('muryllo');
};

/* =========================
   LOGIN
========================= */
function verificarLogin() {
  if (localStorage.getItem("login_ok") === "true") return true;

  if (!usuarios.length) {
    alert("⏳ Usuários carregando...");
    return false;
  }

  const user = prompt("Usuário:");
  const senha = prompt("Senha:");

  const ok = usuarios.find(u => u.user === user && u.senha === senha);
  if (ok) {
    localStorage.setItem("login_ok", "true");
    localStorage.setItem("login_user", user);
    return true;
  }

  alert("❌ Login inválido");
  return false;
}

/* =========================
   PROCESSAR ALVO
========================= */
function processarAlvo() {
  const nums = pegarUltimos5Operacoes();
  if (!nums.length) return;
  document.getElementById('ultimosAlvo').value = nums.join(', ');
}

/* =========================
   FETCH DADOS
========================= */
fetch('https://murylllobenigno-lab.github.io/Googlefiles/dados.json')
  .then(r => r.json())
  .then(d => {
    numerosData = d.numerosData || [];
    analises = d.analises || {};
    jogadasAlvo = d.jogadasAlvo || {};
    atualizarGrade();
  });

fetch('https://murylllobenigno-lab.github.io/Googlefiles/usuarios.json')
  .then(r => r.json())
  .then(d => usuarios = d.usuarios || []);

/* =========================
   MONTAGEM FINAL
========================= */
nav.append(btnInicio, btnOperacoes, btnMuryllo);
app.append(header, abaInicio, abaOperacoes, abaMuryllo, nav);
atualizarAbas('inicio');
</script>
</body>
</html>
